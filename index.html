<!DOCTYPE html>
<html>
  <head>
    <title>Forbes 30 under 30</title>
    <style>
      html, body, main, main canvas {
          height: 100%;
          width: 100%;
          padding: 0;
          margin: 0;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.js"></script>
    <script>
      function setup() {
        createCanvas(windowWidth, windowHeight, WEBGL);
	angleMode(DEGREES);
	strokeWeight(5);
	noFill();
	stroke(32, 8, 64);
	describe(
	  'Users can click on the screen and drag to adjust their perspective in 3D space. The space contains a sphere of dark purple cubes on a light pink background.'
	);

	// Position camera outside the orb (radius = 2000)
	camera(800, -600, 4000, 0, 0, 0, 0, 1, 0);
      }

      function draw() {
	background(250, 180, 200);

	// Call every frame to adjust camera based on mouse/touch
	orbitControl();

	let numBoxes = 0;
	const maxBoxes = 8215;

	// Start at the equator (largest rings) and work outward toward both poles
	for (let offset = 0; offset <= 90 && numBoxes < maxBoxes; offset += 2) {
	  let angles = [90 - offset];
	  if (offset > 0) angles.push(90 + offset);

	  for (let zAngle of angles) {
	    if (zAngle < 0 || zAngle >= 180) continue;
	    let ringRadius = sin(zAngle);
	    let step = ringRadius > 0.05 ? 3 / ringRadius : 60;
	    for (let xAngle = 0; xAngle < 360 && numBoxes < maxBoxes; xAngle += step) {
	      push();
	      rotateZ(zAngle);
	      rotateX(xAngle);
	      translate(0, 2000, 0);
	      box(5);
	      numBoxes += 1;
	      pop();
	    }
	  }
	}

	if (!window.logged) {
	  console.log(`Got ${numBoxes} boxes`);
	  window.logged = true;
	}
      }

      function windowResized() {
	// Resize the canvas to the new window dimensions
	resizeCanvas(windowWidth, windowHeight);
      }
    </script>
  </head>
  <body>
  </body>
</html>
